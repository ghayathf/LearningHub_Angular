<app-admin-side-bar></app-admin-side-bar>

<!-- Page content START -->
<div class="page-content">

	<!-- Top bar START -->
	<app-admin-header></app-admin-header>
	<!-- Top bar END -->

	<!-- Page main content START -->
	<div class="page-content-wrapper border">

		<!-- Title -->
		<div class="row mb-3">
			<div class="col-12 d-sm-flex justify-content-between align-items-center">
				<h1 class="h3 mb-2 mb-sm-0">Courses</h1>
				<!-- <a routerLink="/Admin/CreateCourse" class="btn btn-sm btn-primary mb-0">Create a Course</a> -->
				<a (click)="OpenCreateDialog()" class="btn btn-sm btn-primary mb-0">Create a Course</a>
			</div>
		</div>

		<!-- Course boxes START -->
		<div class="row g-4 mb-4">
			<!-- Course item -->
			<div class="col-sm-6 col-lg-4">
				<div class="text-center p-4 bg-primary bg-opacity-10 border border-primary rounded-3">
					<h5>Total Courses</h5>
					<h2 class="mb-0 fs-1 text-primary">{{ this.courseService.courses.length }}</h2>
				</div>
			</div>

			<!-- Course item -->
			<div class="col-sm-6 col-lg-4">
				<div class="text-center p-4 bg-success bg-opacity-10 border border-success rounded-3">
					<h6>Activated Courses</h6>
					<h2 class="mb-0 fs-1 text-success">996</h2>
				</div>
			</div>

			<!-- Course item -->
			<div class="col-sm-6 col-lg-4">
				<div class="text-center p-4  bg-warning bg-opacity-15 border border-warning rounded-3">
					<h6>Pending Courses</h6>
					<h2 class="mb-0 fs-1 text-warning">200</h2>
				</div>
			</div>
		</div>
		<!-- Course boxes END -->

		<!-- Card START -->
		<div class="card bg-transparent border">

			<!-- Card header START -->
			<div class="card-header bg-light border-bottom">
				<!-- Search and select START -->
				<div class="row g-3 align-items-center justify-content-between">
					<!-- Search bar -->
					<div class="col-md-8">
						<form class="rounded position-relative">
							<input class="form-control bg-body" type="search" placeholder="Search" aria-label="Search"
								[(ngModel)]="CourseName" name="CourseName">
							<button
								class="bg-transparent p-2 position-absolute top-50 end-0 translate-middle-y border-0 text-primary-hover text-reset"
								type="submit" (click)="searchCourses()">
								<i class="fas fa-search fs-6 "></i>
							</button>
						</form>
					</div>

					<!-- Select option -->
					<div class="col-md-3">
						<!-- Short by filter -->
						<form>
							<select class="form-select js-choice border-0 z-index-9" aria-label=".form-select-sm">
								<option value="">Sort by</option>
								<option>Newest</option>
								<option>Oldest</option>
								<option>Accepted</option>
								<option>Rejected</option>
							</select>
						</form>
					</div>
				</div>
				<!-- Search and select END -->
			</div>
			<!-- Card header END -->

			<!-- Card body START -->
			<div class="card-body">
				<!-- Course table START -->
				<div class="table-responsive border-0 rounded-3">
					<!-- Table START -->
					<table class="table table-dark-gray align-middle p-4 mb-0 table-hover">
						<!-- Table head -->
						<thead>
							<tr>
								<th scope="col" class="border-0 rounded-start">Course Name</th>
								<th scope="col" class="border-0">Category</th>
								<th scope="col" class="border-0">Level</th>
								<th scope="col" class="border-0 rounded-end">Action</th>
							</tr>
						</thead>

						<!-- Table body START -->
						<tbody>

							<!-- Table row -->
							<tr *ngFor="let item of courseService.courses">
								<!-- Table data -->
								<td>
									<div class="d-flex align-items-center position-relative">
										<!-- Image -->
										<div class="w-60px">
											<img src="../../../assets/HomeAssets/images/{{item.courseimage}}"
												class="rounded" alt="">
										</div>
										<!-- Title -->
										<h4 class="table-responsive-title mb-0 ms-2">
											<a href="#" class="stretched-link">{{ item.coursename }}</a>
										</h4>
									</div>
								</td>

								<!-- Table data -->
								<td>
									<div class="d-flex align-items-center mb-3">

										<!-- Info -->
										<div class="ms-2">
											<h4 class="mb-0 fw-light">{{ item.category_Id }}</h4>
										</div>
									</div>
								</td>


								<!-- Table data -->
								<td> <span class="badge text-bg-primary">{{ item.courselevel }}</span> </td>



								<!-- Table data -->
								<td>
									<button class="btn btn-sm btn-info-soft me-1 mb-1 mb-md-0"
										(click)="openDetailsDialog(item.courseid)">Details</button>
									<button (click)="openDeleteDialog(item.courseid)"
										class="btn btn-sm btn-danger-soft mb-0">Delete</button>
									<button (click)="openUpdateDialog(item.courseid)"
										class="btn btn-sm btn-info-soft mb-0">Update</button>
								</td>
							</tr>


						</tbody>
						<!-- Table body END -->
					</table>
					<!-- Table END -->
				</div>
				<!-- Course table END -->
			</div>
			<!-- Card body END -->

			<!-- Card footer START -->
			<div class="card-footer bg-transparent pt-0">
				<!-- Pagination START -->
				<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
					<!-- Content -->
					<p class="mb-0 text-center text-sm-start">Showing 1 to 8 of 20 entries</p>
					<!-- Pagination -->
					<nav class="d-flex justify-content-center mb-0" aria-label="navigation">
						<ul
							class="pagination pagination-sm pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
							<li class="page-item mb-0"><a class="page-link" href="#" tabindex="-1"><i
										class="fas fa-angle-left"></i></a></li>
							<li class="page-item mb-0"><a class="page-link" href="#">1</a></li>
							<li class="page-item mb-0 active"><a class="page-link" href="#">2</a></li>
							<li class="page-item mb-0"><a class="page-link" href="#">3</a></li>
							<li class="page-item mb-0"><a class="page-link" href="#"><i
										class="fas fa-angle-right"></i></a></li>
						</ul>
					</nav>
				</div>
				<!-- Pagination END -->
			</div>
			<!-- Card footer END -->
		</div>
		<!-- Card END -->
	</div>
	<!-- Page main content END -->

</div>
<!-- Page content END -->

<!-- <ng-template #DeleteForm>
	<h2 mat-dialog-content>Would you like to Delete this C ?</h2>
	<div mat-dialog-actions>
		<input type="button" mat-dialog-close class="btn btn-success" value="Yes" (click)="DeleteCategory()">
		<input type="button" mat-dialog-close class="btn btn-error" value="No">
	</div>
</ng-template> -->


<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="wheat" type="square-jelly-box" [fullScreen]="true">
	<p style="color: wheat"> Waiting... </p>
</ngx-spinner>

<ng-template #UpdateForm>
	<section class="py-0 bg-blue h-100px align-items-center d-flex h-200px rounded-0"
		style="background:url(../../../assets/HomeAssets/images/pattern/04.png) no-repeat center center; background-size:cover;">
		<!-- Main banner background image -->
		<div class="container">
			<div class="row">
				<div class="col-12 text-center">
					<!-- Title -->
					<h1 class="text-white">Update Course</h1>
				</div>
			</div>
		</div>
	</section>

	<section style="background-color:#2a2c31">
		<div class="container">


			<div class="card bg-transparent border rounded-3 mb-5">
				<div id="stepper" class="bs-stepper stepper-outline">


					<!-- Card body START -->
					<div class="card-body">
						<!-- Step content START -->
						<div class="bs-stepper-content">


							<!-- Step 1 content START -->
							<div id="step-1" role="tabpanel" class="content" aria-labelledby="steppertrigger1">
								<!-- Title -->
								<h4>Update Course </h4>

								<hr> <!-- Divider -->

								<!-- Basic information START -->
								<div class="row g-4">
									<!-- Course title -->
									<div class="col-12">
										<form [formGroup]="UpdateCourseForm" class="example-form">
											<mat-form-field class="example-full-width">
												<mat-label>Course name</mat-label>
												<input type="text" matInput formControlName="coursename">

												<mat-error
													*ngIf="UpdateCourseForm.controls['coursename'].hasError('required')">
													Course name is <strong>required</strong>
												</mat-error>
											</mat-form-field>
											<mat-form-field class="example-full-width">
												<mat-label>Course Description</mat-label>
												<input type="text" matInput formControlName="coursedescription">

												<mat-error
													*ngIf="UpdateCourseForm.controls['coursedescription'].hasError('required')">
													Course description is <strong>required</strong>
												</mat-error>
											</mat-form-field>
											<mat-form-field class="example-full-width">
												<mat-error
													*ngIf="UpdateCourseForm.controls['courseimage'].hasError('required')">
													Course Image is <strong>required</strong>
												</mat-error>
										</mat-form-field>	
											<div class="col-md-6">
												
							<mat-form-field appearance="fill">
								<mat-label>Course Level</mat-label>
								<mat-select formControlName="courselevel" [(ngModel)]="selectedUpdatedLevel">
								  <mat-option *ngFor="let level of Levels| enumValues" [value]="level.index" >
									{{level.name}}
									
								  </mat-option>
								</mat-select>
							  </mat-form-field>
											</div>
											<div class="col-12">
									
							<mat-form-field appearance="fill">
								<mat-label>Category</mat-label>
								<mat-select formControlName="category_Id" [(ngModel)]="selectedUpdatedCategory">
								  <mat-option *ngFor="let cate of categoryService.categories" [value]="cate.categoryid" (click)="print(cate.categoryname)">
									{{cate.categoryname}}
									
								  </mat-option>
								</mat-select>
							  </mat-form-field>
											</div>
											<div>
											<div>
											<div class="col-12">

											<label style="cursor:pointer;"><span>
																<input class="form-control stretched-link" type="file"
																	name="my-image" id="image"
																	accept="image/gif, image/jpeg, image/png"
																	(change)="UploadImage(file)" #file
																	formControlName="courseimage" />
															</span>
														</label>
														<p class="small mb-0 mt-2"><b>Note:</b> Only JPG, JPEG and PNG.
															Our
															suggested dimensions are 600px * 450px. Larger image will be
															cropped
															to 4:3 to fit our thumbnails/previews.</p>
													</div>
												</div>
											</div>




											<!-- Step 1 button -->
											<div class="d-flex justify-content-end mt-3">
												<button mat-dialog-close class="btn btn-primary next-btn mb-0"
													[disabled]="UpdateCourseForm.invalid"
													(click)="UpdateCourse()">Update</button>
											</div>
										</form>
									</div>


								</div>
								<!-- Basic information START -->
							</div>
							<!-- Step 1 content END -->

						</div>
					</div>
					<!-- Card body END -->
				</div>
			</div>
		</div>
	</section>
</ng-template>

<ng-template #DetailsForm>
	<!-- Page main content START -->
	<div class="page-content-wrapper border" style="background-color: #333">



		<div class="row g-4">

			<!-- Course information START -->
			<div class="col-xxl-12">
				<div class="card bg-transparent border rounded-3 h-100">
					<!-- Card body START -->
					<div class="card-body">

						<!-- Course image and info START -->
						<div class="row g-4">
							<!-- Course image -->
							<div class="col-md-6">
								<img src="../../../assets/HomeAssets/images/courses/4by3/01.jpg" class="rounded" alt="">
							</div>
							<!-- Course info and avatar -->
							<div class="col-md-6">
								<h1>{{ this.courseService.course.coursename }}</h1>
								<!-- Info -->
								<h3 class="mb-3">{{this.courseService.course.coursedescription}}</h3>



							</div>
						</div>
						<!-- Course image and info END -->

						<!-- Information START -->
						<div class="row mt-3">

							<!-- Information item -->
							<div class="col-md-6">
								<ul class="list-group list-group-borderless">


									<li class="list-group-item">
										<span>Total Enrolled:</span>
										<span class="h6 mb-0">12,000+</span>
									</li>

									<li class="list-group-item">
										<span>Certificate:</span>
										<span class="h6 mb-0">Yes</span>
									</li>
								</ul>
							</div>

							<!-- Information item -->
							<div class="col-md-6">
								<ul class="list-group list-group-borderless">
									<li class="list-group-item">
										<span>Level:</span>
										<span class="h6 mb-0">{{ this.courseService.course.courselevel }}</span>
									</li>

									<li class="list-group-item">
										<span>Total Lecture:</span>
										<span class="h6 mb-0">30</span>
									</li>
								</ul>
							</div>
						</div>
						<!-- Information END -->
					</div>
					<!-- Card body END -->
				</div>
			</div>
			<!-- Course information END -->


			<!-- Student review END -->

		</div> <!-- Row END -->
	</div>
</ng-template>

<ng-template #DeleteForm>
	<h2 mat-dialog-content>Would you like to Delete this Course ?</h2>
	<div mat-dialog-actions>
		<input type="button" mat-dialog-close class="btn btn-danger" value="Yes" (click)="DeleteCourse()">
		<input type="button" mat-dialog-close class="btn btn-error" value="No">
	</div>
</ng-template>

<ng-template #CreateForm>
	<app-admin-side-bar></app-admin-side-bar>
	<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="wheat" type="square-jelly-box" [fullScreen]="true">
		<p style="color: wheat"> Waiting... </p>
	</ngx-spinner>

	<section class="py-0 bg-blue h-100px align-items-center d-flex h-200px rounded-0"
		style="background:url(../../../assets/HomeAssets/images/pattern/04.png) no-repeat center center; background-size:cover;">
		<!-- Main banner background image -->
		<div class="container">
			<div class="row">
				<div class="col-12 text-center">
					<!-- Title -->
					<h1 class="text-white">Create a new Course</h1>
				</div>
			</div>
		</div>
	</section>

	<section style="background-color:#2a2c31">
		<div class="container">
			<div class="row">
				<div class="col-md-8 mx-auto text-center">
					<!-- Content -->
				</div>
			</div>

			<div class="card bg-transparent border rounded-3 mb-5">
				<div id="stepper" class="bs-stepper stepper-outline">


					<!-- Card body START -->
					<div class="card-body">
						<!-- Step content START -->
						<div class="bs-stepper-content">
							<form [formGroup]="CreateCourseForm">

								<!-- Step 1 content START -->

								<!-- Title -->
								<h4>Course details</h4>

								<hr> <!-- Divider -->

								<!-- Basic information START -->
								<div class="row g-4">
									<!-- Course title -->
									<div>
										<mat-form-field class="example-full-width">
											<mat-label>CourseName</mat-label>
											<input type="text" matInput formControlName="coursename">
											<mat-error
												*ngIf="CreateCourseForm.controls['coursename'].hasError('required')">
												Course Name is <strong>required</strong>
											</mat-error>
										</mat-form-field>
									</div>

									<!-- Short description -->
									<div class="col-12">
										<mat-form-field class="example-full-width">
											<mat-label>course Description</mat-label>
											<input type="text" matInput formControlName="coursedescription">
											<mat-error
												*ngIf="CreateCourseForm.controls['coursedescription'].hasError('required')">
												course Description is <strong>required</strong>
											</mat-error>
										</mat-form-field>
									</div>





									<div class="col-md-6">
										<!-- <label class="form-label">Course level</label>
										<select class="form-select js-choice border-0 z-index-9 bg-transparent" aria-label=".form-select-sm" data-search-enabled="false" data-remove-item-button="true">
											<option value="">Select course level</option>
											<option>All level</option>
											<option>Beginner</option>
											<option>Intermediate</option>
											<option>Advance</option>
										</select> -->
                   <!-- <mat-form-field class="example-full-width">
                      <mat-label>course level</mat-label>
                      <input type="number" matInput formControlName="courselevel">
                      <mat-error *ngIf="CreateCourseForm.controls['courselevel'].hasError('required')">
                        course level is <strong>required</strong>
                      </mat-error>
                    </mat-form-field>-->
					<mat-form-field appearance="fill">
						<mat-label>Course Level</mat-label>
						<mat-select formControlName="courselevel" [(ngModel)]="selectedLevel">
						  <mat-option *ngFor="let level of Levels| enumValues" [value]="level.index" >
							{{level.name}}
							
						  </mat-option>
						</mat-select>
					  </mat-form-field>
									</div>
									
									<div class="col-12">
										<!--<mat-form-field class="example-full-width">
                      <mat-label>category_Id</mat-label>
                      <input type="number" matInput formControlName="category_Id">
                      <mat-error *ngIf="CreateCourseForm.controls['category_Id'].hasError('required')">
                        category_Id is <strong>required</strong>
                      </mat-error>
                    </mat-form-field>-->
										<mat-form-field appearance="fill">
											<mat-label>Category</mat-label>
											<mat-select formControlName="category_Id" [(ngModel)]="selectedCategory">
												<mat-option *ngFor="let cate of categoryService.categories"
													[value]="cate.categoryid" (click)="print(cate.categoryname)">
													{{cate.categoryname}}

												</mat-option>
											</mat-select>
										</mat-form-field>
									</div>

									<div class="col-12">
										<div
											class="text-center justify-content-center align-items-center p-4 p-sm-5 border border-2 border-dashed position-relative rounded-3">
											<!-- Image -->
											<img src="assets/images/element/gallery.svg" class="h-50px" alt="">
											<div>
												<h6 class="my-2">Upload Cayrgory image here, or<a href="#!"
														class="text-primary"> Browse</a></h6>
												<label style="cursor:pointer;">
													<span>

														<input class="form-control stretched-link" type="file"
															name="my-image" id="image"
															accept="image/gif, image/jpeg, image/png"
															(change)="UploadImage(file)" #file />
													</span>
												</label>
												<p class="small mb-0 mt-2"><b>Note:</b> Only JPG, JPEG and PNG. Our
													suggested dimensions are 600px * 450px. Larger image will be cropped
													to 4:3 to fit our thumbnails/previews.</p>
											</div>
										</div>
									</div>


									<div class="d-flex justify-content-end mt-3">
										<button class="btn btn-primary" mat-dialog-close
											[disabled]="CreateCourseForm.invalid" value="Create"
											(click)="CreateCourse()">Create</button>
									</div>
								</div>

							</form>
						</div>
					</div>
					<!-- Card body END -->
				</div>
			</div>
		</div>
	</section>
	<!-- =======================
Steps END -->

</ng-template>